<?xml version="1.0" encoding="utf-8"?>
<odoo> 

   <!-- WEBSITE CUSTOM QUOTE -->
    <template id="quote" name="Custom Website Quote">
       <t t-name="custommodule.quote">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="container oe_website_sale_quote py-2">
                        <t t-set="partner_id" t-value="env.user.partner_id.id"/>  
                        <t t-set="is_public_user" t-value="request.env.user.has_group('base.group_public')"/>  
                        <div class="row">
                            <div class="col-22">
                                <h2>Solicita tu cotización</h2>
                                <p>Agregue múltiples productos y tamaños a su solicitud de cotización</p>
                                <div t-attf-class="s_alert s_alert_md alert-delta w-100 clearfix {{'d-none' if not is_public_user  else ''}}"  id="alert-save-form" data-name="Warning">
                                    <i class="fa fa-2x fa-info-circle s_alert_icon"/>
                                    <div class="s_alert_content">
                                    <p t-if="is_public_user" class="o_default_snippet_text o_iniciar_sesion">
                                    Si desea dar seguimiento a su cotización <a href="/web/signup"><strong>regístrese</strong></a> o <a href="web/login"><strong>inicie sesión</strong></a><br/>
                                    </p>
                                    </div>
                                </div>              
                            </div>
                        </div>

                        <div class="row container_form_quote">
                            
                            
                            <div class="col-12 col-xl order-xl-2 oe_cart">
                                
                                <form>
                                <div class="form-row">
                                    <h4>Cotizar</h4>
                                    <div t-attf-class="form-group col-lg-12 div_product">
                                        <label class="col-form-label" for="product">Producto</label>
                                        <select id="selectproduct" style="color:black"  class="form-control o_website_form_input" name="product" required="false">
                                            <option class="form-control" style="color:black" t-att-value="-1">Seleccionar...</option>
                                            <t t-foreach="env['product.template'].sudo().search([('is_quote','=',True)])" t-as="qto">
                                                <option class="form-control" style="color:black" att-data-product-id="qto.id" t-att-data-name="qto.name" t-esc="qto.name" t-att-value="qto.id"/>
                                            </t>
                                        </select>
                                    </div>
                                        
                                    
                                    <div class="w-100" />
                                        <div t-attf-class="form-group col-lg-6" id="div_presentacion">
                                            <label class="col-form-label" for="email">Presentación</label>
                                            <select id="selectpresentacion" style="color:black" class="form-control o_website_form_input" name="presentacion" required="true">
                                                <option class="form-control" style="color:black" t-att-value="-1">Seleccionar...</option>
                                            </select>
                                        </div>

                                    <div class="w-100" />    
                                        <div t-attf-class="form-group col-lg-6" id="div_cantidad">
                                            <label class="col-form-label" for="email">Cantidad</label>
                                            <select id="selectcantidad" style="color:black"  class="form-control o_website_form_input" name="presentacion" required="true">
                                                <option class="form-control" style="color:black" t-att-value="-1">Seleccionar...</option>
                                            </select>
                                        </div>

                                        <div t-attf-class="form-group col-lg-6" id="div_additem">
                                            <a role="button" id="btn-add-item" href="#" class="btn ml32 mt32 btn-primary o_website_form_add_item a-submit-disable a-submit-loading">
                                                <span>Agregar Item</span>
                                            </a>
                                        </div>
                                        
                                        <div class="w-100" />
                                        <h4>Información de contacto</h4>
                                        <div  t-attf-class="form-group col-lg-6" id="div_nombres">
                                            <label class="col-form-label" for="primer_nombre" requerid="true">Nombres</label>
                                            <input maxlength="50" name="primer_nombre" style="color:black"  t-attf-class="form-control" t-att-value="env.user.partner_id.primer_nombre" />
                                        </div>
                                        <div t-attf-class="form-group col-lg-6" id="div_apellidos">
                                            <label class="col-form-label" for="segundo_nombre" requerid="true">Apellidos</label>
                                            <input maxlength="50" name="segundo_nombre" style="color:black"  t-attf-class="form-control" t-att-value="env.user.partner_id.segundo_nombre"  />
                                        </div>
                                        <div class="w-100" />
                                        <div t-attf-class="form-group col-lg-6" id="div_email">
                                            <label class="col-form-label" for="email" requerid="true">Correo electrónico</label>
                                            <input maxlength="100" type="email" style="color:black"  name="email" t-attf-class="form-control" t-att-value="env.user.partner_id.email" />
                                        </div>
                                        <div t-attf-class="form-group col-lg-6" id="div_phone">
                                            <label class="col-form-label" for="phone">Teléfono</label>
                                            <input maxlength="10" type="tel" style="color:black"  name="phone" t-attf-class="form-control" t-att-value="env.user.partner_id.phone" />
                                        </div>
                                        <div class="w-100" />
                                        <div t-attf-class="d-none form-group col-lg-12" id="div_contrasenia">
                                            <label class="col-form-label" for="contrasenia">Contraseña</label>
                                            <input type="password" name="contrasenia" t-attf-class="form-control" />
                                        </div>
                                        <div class="w-100" />
                                        <div t-attf-class="d-none form-group col-lg-12" id="div_contrasenia_2">
                                            <label class="col-form-label" for="contrasenia_2">Confirmar contraseña</label>
                                            <input type="password" name="div_contrasenia_2" t-attf-class="form-control" />
                                        </div>
                                        
                                        <div class="form-group row">
                                            <h4>Datos de Facturación</h4>
                                            <div class="w-100"/>
                                            <div t-attf-class="form-group col-lg-6 div_tipo_documento">
                                                <label class="col-form-label" for="tipo_documento">Tipo de identificación</label>
                                                <select id="tipo_documento" name="tipo_documento" style="color:black" t-attf-class="form-control" >
                                                    <option value="C" data-name="Cédula" t-att-selected="'C' == env.user.partner_id.tipo_documento">
                                                        Cédula
                                                    </option>
                                                    <option value="R" data-name="RUC" t-att-selected="'R' == env.user.partner_id.tipo_documento" >
                                                        RUC
                                                    </option>
                                                </select>
                                            </div>
                                            <div t-attf-class="form-group col-lg-6 div_vat">
                                                <label class="col-form-label" for="vat">Número de identidad</label>
                                                <input style="color:black" maxlength="13" type="text" name="vat" t-attf-class="form-control" t-att-value="env.user.partner_id.vat" />
                                            </div>

                                            <div class="w-100"/>
                                            <div t-attf-class="form-group col-lg-12">
                                                <label class="col-form-label" for="name">Nombre completo/Razón social</label>
                                                <input style="color:black" maxlength="100" type="text" name="name" t-attf-class="form-control" t-att-value="env.user.partner_id.name if not is_public_user  else ''" />
                                            </div>

                                            <div class="w-100"/>
                                            <div t-attf-class="form-group col-lg-12">
                                                <label class="col-form-label" for="calle_billing">Calle, Número de Casa/Departamento y Referencia</label>
                                                <input style="color:black" maxlength="100" type="text" name="calle_billing" t-attf-class="form-control" t-att-value="env.user.partner_id.street" />
                                            </div>

                                            <div class="w-100"/>
                                            <div t-attf-class="form-group col-lg-6">
                                                <label class="col-form-label" for="state_id">Provincia</label>
                                                <select style="color:black" id="state_id" name="state_id" data-init="1" t-attf-class="form-control" >
                                                    <option value="0">Provincia...</option>
                                                    <t t-foreach="request.env['res.country.state'].search([('country_id.code', '=', 'EC')], order='name asc')" t-as="s">
                                                        <option t-att-value="s.id"  t-att-selected="s.id == ('0' if not env.user.partner_id.state_id else env.user.partner_id.state_id.id )" >
                                                            <t t-esc="s.name"/>
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>

                                            <div t-attf-class="form-group col-lg-6">
                                                <label class="col-form-label" for="city_id">Ciudad</label>
                                                <select style="color:black" id="city_id" name="city_id" data-init="1" t-attf-class="form-control" >
                                                    <option value="0">Ciudad...</option>
                                                    <t t-if="env.user.partner_id.city_id" t-foreach="request.env['res.city'].search([('state_id', '=', env.user.partner_id.state_id.id)], order='name asc')" t-as="c">
                                                        <option t-att-value="c.id" t-att-selected="c.id == ('0' if not env.user.partner_id.city_id else env.user.partner_id.city_id.id )">
                                                            <t t-esc="c.name"/>
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>
                                        </div>


                                        <div class="form-group row">
                                            <h4>Dirección de Entrega</h4>
                                            <div class="w-100"/>
                                            <div t-attf-class="form-group col-lg-6">
                                                <label class="col-form-label" for="list_delivery">Direcciones</label>
                                                <select style="color:black" id="list_delivery" name="list_delivery" data-init="1" t-attf-class="form-control">
                                                    <option value="1" data-street="" data-state_id="0" data-city_id="0">Misma direccion de factura...</option>
                                                    <t t-foreach="request.env['res.partner'].search([('parent_id', '=', env.user.partner_id.id), ('type', '=', 'delivery')], order='name asc')" t-as="s">
                                                        <option t-att-value="s.id" t-att-data-street="s.street" t-att-data-state_id="'0' if not s.state_id else s.state_id.id" t-att-data-city_id="'0' if not s.city_id else s.city_id.id">
                                                            <t t-esc="s.name"/>
                                                        </option>
                                                    </t>
                                                    <option value="-1" data-street="" data-state_id="0" data-city_id="0">Otro/Nueva...</option>
                                                </select>
                                            </div>

                                            <div class="w-100"/>
                                            <div t-attf-class="form-group col-lg-12">
                                                <label class="col-form-label" for="calle_delivery">Calle, Número de Casa/Departamento y Referencia</label>
                                                <input style="color:black" maxlength="100" type="text" name="calle_delivery" t-attf-class="form-control "/>
                                            </div>

                                            <div class="w-100"/>
                                            <div t-attf-class="form-group col-lg-6">
                                                <label class="col-form-label" for="state_id_delivery">Provincia</label>
                                                <select style="color:black" id="state_id_delivery" name="state_id_delivery" data-init="1" t-attf-class="form-control">
                                                    <option value="0">Provincia...</option>
                                                    <t t-foreach="request.env['res.country.state'].search([('country_id.code', '=', 'EC')], order='name asc')" t-as="s">
                                                        <option t-att-value="s.id" >
                                                            <t t-esc="s.name"/>
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>

                                            <div t-attf-class="form-group col-lg-6">
                                                <label class="col-form-label" for="city_id_delivery">Ciudad</label>
                                                <select style="color:black" id="city_id_delivery" name="city_id_delivery" data-init="1" t-attf-class="form-control ">
                                                    <option value="0">Ciudad...</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-group row">
                                            <br/>
                                            <br/>
                                            <br/>
                                            <div class="offset-lg-5 offset-md-2 col-md-8 col-lg-12">
                                            <!--<button class="btn btn-lg o_website_form_send_quote o_default_snippet_text btn-primary btn-block">Recibir cotización</button>-->
                                                <a role="button" id="btn-primary" href="#" class="btn btn-primary mb32 o_website_form_send_quote a-submit-disable a-submit-loading">
                                                    <span>Recibir cotización</span>
                                                    <i class="fa fa-chevron-right"/>
                                                </a>
                                                <span id="o_website_form_result"/>
                                            </div>
                                        </div>
                                        
                                    </div>
                                </form>
                                
                            </div>
                        
                            <div class="col-12 col-xl order-xl-2 d-xl-block">
                                <div class="card">
                                    <div class="card-body p-xl-0">
                                        <div class="toggle_summary_div d-xl-block">
                                            <table class="table table-striped table-sm" id="cart_products">
                                                <thead>
                                                    <tr>
                                                        <th class="border-top-0 td-name" colspan="2"></th>
                                                        <th class="border-top-0 td-img" colspan="6">Producto</th>
                                                        <th class="border-top-0 td-qty" colspan="2">Cantidad</th>
                                                        <th class="border-top-0 text-center td-price" colspan="2"></th>
                                                    </tr>
                                                </thead>
                                                <tbody id="listitems_quote">
                                                    <tr>
                                                        <td class="td-img text-center" colspan="2">
                                                        </td>
                                                        <td class="td-product_name" colspan="6">
                                                        </td>
                                                        <td class="td-qty" colspan="2">
                                                        </td>
                                                        <td class="text-center td-price" colspan="2">
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        
                
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </template>

    

</odoo>
